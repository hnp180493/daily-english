<div class="path-selector-container p-6">
  <h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">Choose Your Learning Path</h2>
  
  @if (isLoading()) {
    <div class="flex justify-center items-center py-12">
      <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"></div>
    </div>
  } @else {
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      @for (path of paths(); track path.id) {
        <div 
          class="path-card bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-all duration-300 hover:shadow-xl"
          [class.opacity-60]="isPathLocked(path)"
          [class.cursor-not-allowed]="isPathLocked(path)"
          [class.border-2]="isPathActive(path.id)"
          [class.border-primary-500]="isPathActive(path.id)">
          
          <div class="p-6">
            <div class="flex items-start justify-between mb-4">
              <h3 class="text-xl font-bold text-gray-900 dark:text-white">{{ path.name }}</h3>
              @if (isPathLocked(path)) {
                <svg class="w-6 h-6 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/>
                </svg>
              }
            </div>

            <p class="text-sm text-gray-600 dark:text-gray-300 mb-4">{{ path.description }}</p>

            <div class="mb-4">
              <div class="flex items-center text-sm text-gray-500 dark:text-gray-400 mb-2">
                <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
                </svg>
                <span>{{ path.durationWeeks }} weeks</span>
              </div>
              <div class="flex items-center text-sm text-gray-500 dark:text-gray-400">
                <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"/>
                </svg>
                <span>{{ path.modules.length }} modules</span>
              </div>
            </div>

            <div class="mb-4">
              <div class="flex flex-wrap gap-2">
                @for (module of path.modules; track module.id) {
                  <span class="inline-block px-2 py-1 text-xs font-medium bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 rounded">
                    {{ module.topics[0] }}
                  </span>
                }
              </div>
            </div>

            @if (isPathActive(path.id)) {
              <div class="mb-4">
                <div class="flex justify-between text-sm text-gray-600 dark:text-gray-300 mb-1">
                  <span>Progress</span>
                  <span>{{ getPathProgress(path.id) }}%</span>
                </div>
                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                  <div 
                    class="bg-primary-600 h-2 rounded-full transition-all duration-300"
                    [style.width.%]="getPathProgress(path.id)">
                  </div>
                </div>
              </div>
            }

            @if (isPathLocked(path)) {
              <div class="text-sm text-gray-500 dark:text-gray-400 italic">
                Complete {{ path.unlockRequirement }} to unlock
              </div>
            } @else {
              <button
                (click)="selectPath(path.id)"
                [disabled]="isLoading()"
                class="w-full py-2 px-4 rounded-lg font-medium transition-colors duration-200"
                [class]="isPathActive(path.id) 
                  ? 'bg-secondary-600 hover:bg-secondary-700 text-white' 
                  : 'bg-primary-600 hover:bg-primary-700 text-white'">
                {{ isPathActive(path.id) ? 'Continue Path' : 'Start Path' }}
              </button>
            }
          </div>
        </div>
      }
    </div>
  }
</div>
