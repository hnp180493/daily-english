<header class="app-header">
  <div class="header-container">
    <div class="logo-section">
      <a routerLink="/home" class="logo-link">
        <h1 class="logo-text">{{ appTitle }}</h1>
      </a>
    </div>
    
    <nav class="nav-links">
      <a routerLink="/home" routerLinkActive="active" class="nav-link">WRITING</a>
      <div class="nav-dropdown">
        <button class="nav-link dropdown-trigger" 
                [class.active]="isLearningMenuActive()"
                (mouseenter)="onMenuMouseEnter()" 
                (mouseleave)="onMenuMouseLeave()">
          ğŸ“– LEARNING
          <span class="dropdown-arrow">â–¼</span>
        </button>
        @if (showLearningMenu()) {
          <div class="dropdown-menu"
               (mouseenter)="onMenuMouseEnter()" 
               (mouseleave)="onMenuMouseLeave()">
            <a routerLink="/learning-path" routerLinkActive="active" class="dropdown-item">
              ğŸ¯ Learning Path
            </a>
            <a routerLink="/dashboard" routerLinkActive="active" class="dropdown-item">
              ğŸ“Š Dashboard
            </a>
            <a routerLink="/exercises/custom" routerLinkActive="active" class="dropdown-item">
              ğŸ“ Custom Exercises
            </a>
            <a routerLink="/guide" routerLinkActive="active" class="dropdown-item">
              ğŸ“š Guide
            </a>
          </div>
        }
      </div>
      <a routerLink="/review-queue" routerLinkActive="active" class="nav-link review-link" title="Review Queue">
        ğŸ”„ REVIEW
        @if (dueReviewCount() > 0) {
          <span class="review-badge" [class.urgent]="urgentReviewCount() > 0">
            {{ dueReviewCount() }}
          </span>
        }
      </a>
      <!-- <a class="nav-link">SPEAKING <span class="beta-badge">BETA</span></a>
      <a class="nav-link">VOCABULARY</a>
      <a class="nav-link">RANK</a> -->
    </nav>
    
    <div class="profile-section">
      <app-auth-status />
      <div class="stats-group">
        @if (streak() >= 0) {
          <div class="streak-display" title="Sá»‘ ngÃ y há»c liÃªn tá»¥c">
            <span class="streak-icon">ğŸ”¥</span>
            <span class="streak-count">{{ streak() }}</span>
          </div>
        }
        <div class="points-display" title="Tá»•ng Ä‘iá»ƒm tÃ­ch lÅ©y">
          <span class="points-icon">â­</span>
          <span class="points-count">{{ displayPoints() }}</span>
          
          @for (point of flyingPoints(); track point.id) {
            <div class="flying-point"
                 [style.left.px]="point.startX"
                 [style.top.px]="point.startY"
                 [style.--end-x]="(point.endX - point.startX) + 'px'"
                 [style.--end-y]="(point.endY - point.startY) + 'px'">
              +{{ point.points }}
            </div>
          }
        </div>
      </div>
      <a routerLink="/achievements" routerLinkActive="active" class="achievement-btn" title="Achievements">
        <span class="achievement-icon">ğŸ†</span>
        @if (displayAchievementCount() > 0) {
          <span class="achievement-badge">{{ displayAchievementCount() }}</span>
        }
      </a>
      <a routerLink="/favorites" routerLinkActive="active" class="favorite-btn" title="BÃ i táº­p yÃªu thÃ­ch">
        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
        </svg>
        @if (favoriteCount() > 0) {
          <span class="favorite-badge">{{ favoriteCount() }}</span>
        }
      </a>
      <a routerLink="/profile" class="profile-btn">
        <span class="profile-icon">ğŸ‘¤</span>
        <span class="profile-text">MY PROFILE</span>
      </a>
    </div>
  </div>
</header>
