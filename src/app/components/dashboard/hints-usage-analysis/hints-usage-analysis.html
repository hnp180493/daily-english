<div class="hints-usage-card">
  @if (data(); as hintsData) {
    <div class="card-header">
      <h3 class="card-title">ðŸ’¡ Hints Usage</h3>
    </div>

    <div class="card-content">
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-label">Total Hints Used</div>
          <div class="stat-value">{{ hintsData.totalHintsUsed }}</div>
        </div>

        <div class="stat-item">
          <div class="stat-label">Average per Exercise</div>
          <div class="stat-value">{{ hintsData.averageHintsPerExercise.toFixed(1) }}</div>
        </div>
      </div>

      <div class="trend-section">
        <div class="trend-header">
          <span class="trend-label">Trend</span>
          <span 
            class="trend-indicator"
            [class]="getTrendColor(hintsData.trend)"
            [attr.aria-label]="'Hint usage is ' + getTrendLabel(hintsData.trend)">
            {{ getTrendIcon(hintsData.trend) }} {{ getTrendLabel(hintsData.trend) }}
          </span>
        </div>

        <div class="comparison-text">
          Recent average: <strong>{{ hintsData.recentAverage.toFixed(1) }}</strong> hints
          <br>
          Overall average: <strong>{{ hintsData.overallAverage.toFixed(1) }}</strong> hints
          <br>
          <span [class]="getTrendColor(hintsData.trend)">
            {{ formatPercentage(hintsData.percentageChange) }} 
            {{ hintsData.trend === 'increasing' ? 'more' : hintsData.trend === 'decreasing' ? 'less' : 'change' }}
          </span>
        </div>
      </div>

      @if (hintsData.trend === 'decreasing') {
        <div class="congratulations-message">
          <span class="congrats-icon">ðŸŽ‰</span>
          <span class="congrats-text">
            Great progress! You're becoming more independent in your translations.
          </span>
        </div>
      }
    </div>
  } @else {
    <div class="empty-state">
      <p class="empty-message">Complete exercises to see hints usage analysis</p>
    </div>
  }
</div>
