<div class="time-of-day-analysis">
  <div class="widget-header">
    <h3 class="widget-title">Time-of-Day Productivity</h3>
    <p class="widget-subtitle">When you perform best</p>
  </div>

  @if (hasInsufficientData()) {
    <div class="insufficient-data">
      <svg class="info-icon" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
      <p class="insufficient-message">Not enough data yet</p>
      <p class="insufficient-hint">Complete at least 20 exercises to see your time-of-day productivity ({{ totalExercises() }}/20)</p>
    </div>
  } @else {
    <div class="periods-grid">
      @for (period of data().periods; track period.name) {
        <div 
          class="period-card"
          [class.most-productive]="period.isMostProductive">
          
          @if (period.isMostProductive) {
            <div class="productive-badge">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
              </svg>
              Most Productive
            </div>
          }

          <div class="period-icon">{{ getPeriodIcon(period.name) }}</div>
          
          <h4 class="period-name">{{ period.displayName }}</h4>
          <p class="period-time">{{ period.timeRange }}</p>

          <div class="period-stats">
            <div class="stat-item">
              <span class="stat-label">Exercises</span>
              <span class="stat-value">{{ period.exerciseCount }}</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Avg Accuracy</span>
              <span class="stat-value" [class]="getAccuracyColorClass(period.averageAccuracy)">
                {{ period.averageAccuracy }}%
              </span>
            </div>
          </div>
        </div>
      }
    </div>
  }
</div>
